# Component Architecture & Organization Guide

## Overview

AKSEP-NEU organizes components hierarchically, matching the CSS inheritance structure. This ensures:
- Clear separation between layout orchestrators, functional groups, and leaf components
- Predictable file structure for new developers
- Easy-to-follow CSS patterns (see `src/styles/.STYLES.md`)
- Scalability for growing component libraries

---

## Directory Structure

```txt
src/components/
├── App.tsx (root application wrapper)
├── content-sections.tsx (orchestrator for content groups)
│
├── content-sections/ (nested group)
│   ├── start.tsx (orchestrator for start page sections)
│   └── start/ (nested section group)
│       ├── hero.tsx (hero banner component)
│       ├── akronym.tsx (AKSEP description section)
│       ├── programm.tsx (program highlights section)
│       ├── aktuell.tsx (news/updates section)
│       └── mitmachen.tsx (participation section)
│
├── figma/ (Figma-generated UI components)
│   └── ImageWithFallback.tsx
│
├── footer.tsx (main footer orchestrator)
│
├── navigation/ (navigation group)
│   ├── Navigation.tsx (main nav component)
│   ├── NavigationItem.tsx (nav item component)
│   └── OverflowNavigation.tsx (responsive nav wrapper)
│
├── page-shell.tsx (layout wrapper for all pages)
│
├── routing/ (routing/navigation logic)
│   └── Router.tsx
│
├── shared/ (utility components - reusable across app)
│   ├── bullet.tsx (bullet point item)
│   ├── caption.tsx (small text/caption)
│   └── heading.tsx (heading utility)
│
└── ui/ (Figma-generated UI library)
    ├── accordion.tsx
    ├── alert.tsx
    ├── avatar.tsx
    ├── badge.tsx
    ├── button.tsx
    ├── card.tsx
    ├── ...
    └── .figma-ui-components.css (special: see below)
```

---

## Component Categories

### 1. Orchestrators
**Purpose:** Compose and coordinate multiple sub-components or sections.
**Characteristics:**
- Contain layout/spacing logic
- May have minimal styling (delegated to `.css` file)
- Handle data flow to children
- Do NOT contain content-specific styles

**Examples:**
- `content-sections.tsx` - coordinates all content groups
- `content-sections/start.tsx` - coordinates start page sections
- `footer.tsx` - orchestrates footer sections
- `page-shell.tsx` - wraps pages with header/footer/main

**CSS Pattern:**
```tsx
// content-sections.tsx
import '@/styles/components/content-sections.css';

export function ContentSections() {
  return (
    <div className="content-sections-root">
      <div className="content-sections-container">
        {/* nested sections */}
      </div>
    </div>
  );
}
```

### 2. Functional Groups
**Purpose:** Organize related components (nav items, card variants, etc.)
**Characteristics:**
- Live in a folder with `.shared.css` + individual component files
- Each component has its own `.css` file
- Share common patterns via parent `.shared.css`
- Usually nested (e.g., `navigation/`, `content-sections/start/`)

**Examples:**
- `navigation/` - all nav-related components
- `content-sections/start/` - all start page sections
- `shared/` - reusable utility components

**CSS Pattern:**
```txt
src/components/navigation/
├── Navigation.tsx         (imports ../../../styles/components/navigation.css)
├── NavigationItem.tsx     (imports ../../../styles/components/navigation.css)
└── OverflowNavigation.tsx (imports ../../../styles/components/navigation.css)

src/styles/components/
└── navigation.css (imports ./.shared.css)
```

### 3. Leaf Components
**Purpose:** Single-responsibility, reusable components (buttons, cards, lists, etc.)
**Characteristics:**
- No sub-components (or minimal)
- Clear, single concern
- Composable (used in other components)
- Have dedicated `.css` file

**Examples:**
- `bullet.tsx` - single bullet point
- `caption.tsx` - typography utility
- `heading.tsx` - heading utility
- `hero.tsx` - hero section component

**CSS Pattern:**
```tsx
// src/components/shared/bullet.tsx
import '@/styles/components/shared.css';

export function Bullet({ children }) {
  return <div className="bullet-root">{children}</div>;
}
```

### 4. UI Library Components (Figma-generated)
**Special Status:** Auto-generated from Figma; see `.figma-ui-components.css` note
**Characteristics:**
- Pre-styled from design system
- Standalone (don't modify unless updating from Figma)
- Located in `src/components/ui/`
- CSS in `src/styles/components/ui/.figma-ui-components.css`

**Do NOT:**
- ❌ Manually edit these components (regenerate from Figma instead)
- ❌ Add custom styles to `.figma-ui-components.css`
- ❌ Move or rename these files

**DO:**
- ✅ Create wrapper components if you need variants
- ✅ Override styles in separate files (e.g., `button-custom.tsx`)
- ✅ Reference the design system they came from

---

## CSS Import Convention

### Rule: Component → CSS One-to-One Mapping

Every `.tsx` file has exactly one corresponding `.css` file (except `ui/` components).

**Flat Component:**
```
src/components/hero.tsx
   ↓ imports
src/styles/components/hero.css
```

**Nested Component (with orchestrator):**
```
src/components/content-sections/
├── start.tsx
│   ↓ imports
│   src/styles/components/content-sections/start.css
│
└── start/
    ├── hero.tsx
    │   ↓ imports
    │   src/styles/components/content-sections/start/hero.css
    │
    └── akronym.tsx
        ↓ imports
        src/styles/components/content-sections/start/akronym.css
```

### Import Statement Format

```txt
// Component file location: src/components/path/ComponentName.tsx
// CSS file location: src/styles/components/path/component-name.css

// Number of '../' = (depth difference)
// Components at src/components/ → import from ../../styles/components/
// Components at src/components/group/ → import from ../../../styles/components/group/
// Components at src/components/group/sub/ → import from ../../../../styles/components/group/sub/

// Example 1: src/components/footer.tsx
import '@/styles/components/footer.css';

// Example 2: src/components/navigation/Navigation.tsx
import '@/styles/components/navigation.css';

// Example 3: src/components/content-sections/start/hero.tsx
import '@/styles/components/content-sections/start/hero.css';
```

### No Cross-Imports

❌ **WRONG:** Component imports CSS from sibling/unrelated group
```tsx
// src/components/content-sections/start/hero.tsx
import '@/styles/components/footer.css'; // ❌ NO!
```

✅ **CORRECT:** Component imports only its own CSS
```tsx
// src/components/content-sections/start/hero.tsx
import '@/styles/components/content-sections/start/hero.css'; // ✅ YES
```

---

## Component Lifecycle

### Phase 1: Design
- Create Figma design or component spec
- Determine if flat or nested structure
- Decide if part of existing group or new group

### Phase 2: Structure
- Create `.tsx` file in appropriate location
- Create corresponding `.css` file
- Create CSS hierarchy (if new group, create `.shared.css` first)

### Phase 3: Implementation
```tsx
// src/components/mygroup/MyComponent.tsx
import '@/styles/components/mygroup/my-component.css';

export function MyComponent() {
  return <div className="my-component-root">...</div>;
}
```

**CSS:**
```css
/* src/styles/components/mygroup/my-component.css */
@import './.shared.css';

.my-component-root {
  /* styles */
}
```

### Phase 4: Export
- Add to orchestrator if grouped
- Add to barrel export (`index.ts`) if needed
- Document in Storybook or similar

### Phase 5: Maintenance
- Update `.css` file when changing component
- Keep CSS hierarchy intact (don't skip levels)
- Keep class names prefixed (e.g., `.my-component-*`)

### Phase 6: Deprecation (Optional)
- Mark component with `@deprecated` JSDoc
- Keep component & CSS intact during deprecation period
- Remove in next major version

---

## Naming Conventions

### File Names
- **Components:** PascalCase (e.g., `Button.tsx`, `Navigation.tsx`)
- **CSS:** kebab-case (e.g., `button.css`, `navigation.css`)
- **Utilities:** camelCase (e.g., `useNavigationState.ts`)

### CSS Class Names
- **Root class:** `.{component-name}-root` (e.g., `.button-root`)
- **Child elements:** `.{component-name}-{element}` (e.g., `.button-icon`, `.button-label`)
- **Modifiers:** `.{component-name}[data-variant='...']` (e.g., `.button[data-variant='primary']`)

**Example:**
```tsx
// Button.tsx
export function Button({ variant, children }) {
  return (
    <button className="button-root" data-variant={variant}>
      <span className="button-label">{children}</span>
    </button>
  );
}
```

```css
/* button.css */
.button-root {
  /* base styles */
}

.button-root[data-variant='primary'] {
  /* primary variant */
}

.button-label {
  /* label specific */
}
```

---

## Common Patterns

### Pattern 1: Orchestrator with Sub-components

```tsx
// src/components/content-sections/start.tsx
import '@/styles/components/content-sections/start.css';
import { Hero } from './start/hero';
import { Akronym } from './start/akronym';

export function StartSections() {
  return (
    <div className="start-sections-root">
      <Hero />
      <Akronym />
    </div>
  );
}
```

```css
/* src/styles/components/content-sections/start.css */
@import './.shared.css';

.start-sections-root {
  display: flex;
  flex-direction: column;
  gap: calc(var(--spacing) * 10);
}
```

### Pattern 2: Grouped Components

```txt
src/components/cards/
├── ProgramCard.tsx
├── EventCard.tsx
└── NewsCard.tsx
```

Each card imports its own CSS, all sharing parent patterns:

```css
/* src/styles/components/cards/.shared.css */
@import '../.shared.css';

.card-wrapper {
  /* shared card patterns */
}
```

```css
/* src/styles/components/cards/program-card.css */
@import './.shared.css';

.program-card-root {
  /* program-specific styles */
}
```

### Pattern 3: Wrapper Component

```tsx
// src/components/MyCustomButton.tsx
import '@/styles/components/my-custom-button.css';
import { Button } from './ui/button';

export function MyCustomButton(props) {
  return (
    <div className="my-custom-button-wrapper">
      <Button {...props} />
    </div>
  );
}
```

---

## Rules & Constraints

### ✅ DO

- ✅ Keep components small and focused
- ✅ Use orchestrators to compose larger layouts
- ✅ Follow the CSS hierarchy exactly
- ✅ Import CSS only from your component's dedicated file
- ✅ Use descriptive, semantic class names
- ✅ Keep component responsibility single

### ❌ DON'T

- ❌ Import CSS from unrelated components
- ❌ Modify files in `src/components/ui/` (regenerate from Figma instead)
- ❌ Skip CSS hierarchy levels
- ❌ Use generic class names (e.g., `.wrapper`, `.container` globally)
- ❌ Create components without corresponding CSS file
- ❌ Nest components more than 3 levels deep (flatten if deeper)

---

## Cross-Reference

- **CSS Architecture?** See `src/styles/.STYLES.md`
- **Adding new components?** Follow the checklist in `.STYLES.md` → Rules for New Components
- **CSS delivery & bundling?** See `.STYLES.md` → CSS Delivery & Bundling

---

## Glossary

- **Orchestrator:** A component that composes and coordinates sub-components
- **Functional Group:** A folder of related components sharing patterns
- **Leaf Component:** A final, non-composite component
- **Hierarchy Level:** A depth where `.shared.css` acts as pattern root
- **CSS One-to-One:** Each component file has exactly one corresponding CSS file

